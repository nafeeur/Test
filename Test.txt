import http.client

# Define the API host and endpoint
host = "fr24api.flightradar24.com"
endpoint = "/api/live/flight-positions/full?bounds=50.682,46.218,14.422,22.243"

# Set up headers
headers = {
    'Accept': 'application/json',
    'Accept-Version': 'v1',
    'Authorization': 'Bearer <token>'  # Replace <token> with your API token
}

def fetch_flight_positions():
    try:
        # Establish the connection
        conn = http.client.HTTPSConnection(host, timeout=10)  # Add a timeout
        # Make the request
        conn.request("GET", endpoint, headers=headers)
        
        # Get the response
        res = conn.getresponse()
        status_code = res.status
        data = res.read()

        # Check the status code
        if status_code == 200:
            print("API Response:")
            print(data.decode("utf-8"))
        else:
            print(f"Error: HTTP {status_code}")
            print(data.decode("utf-8"))
        
        # Close the connection
        conn.close()

    except Exception as e:
        print(f"An error occurred: {e}")

# Run the function
if __name__ == "__main__":
    fetch_flight_positions()
